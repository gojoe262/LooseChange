<html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <!--Javascript Files-->
        <script type="text/javascript" src="js/shared/jquery/jquery-2.1.4.js"></script>
        <script type="text/javascript" src="js/shared/data-access/gJsonCacher.js"></script>
        <script type="text/javascript" src="https://apis.google.com/js/client.js"></script>
        <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>

        <!--Javascript Inline-->
        <script type="text/javascript">
            $(document).ready(function() {

                var jsonCacher = new gJsonCacher();
                jsonCacher.init();

                $('#logText').val('');

                var categories = {
                    categories: [
                        {
                            name: "Electronics",
                            id: "M7QXzfVCXYYxMVm7zETUw5P8u2aXXH"
                        },
                        {
                            name: "Gas/Travel ",
                            id: "UUBrzuaIGxstACf2CshoJDUORO2fBq"
                        }
                    ]
                };

                var transactions = {
                    transactions: [
                        {
                            amount: 18.71,
                            categoryId: "9TCH3YOVBcD5RxCJFrLyIZxuhJDHY9",
                            comment: "McDons",
                            date: "20150109",
                            id: "6VDHBs6wyKhmp61JKsX0tmgj9klifr",
                            transactionType: "IN"
                        },
                        {
                            amount: 40.22,
                            categoryId: "9TCH3YOVBcD5RxCJFrLyIZxuhJDHY9",
                            comment: "McDons",
                            date: "20150109",
                            id: "6VDHBs6wyKhmp61JKsX0tmgj9klifr",
                            transactionType: "IN"
                        }
                    ]
                };

                //List objects
                $('#btnListObjects').click(function(){
                    logMessage('\n');
                    jsonCacher.getObjectList(function(objectList){
                        $.each(objectList, function(index, value){
                            var object = value;
                            logMessage(index + '. ' + object.title);
                        });
                    });
                });

                //Upload Objects
                $('#btnUploadObjectCategories').click(function(){
                    jsonCacher.insertObject({
                        name: 'Categories',
                        data: categories,
                        onSuccess: function(){
                            logMessage('Succesfully inserted Categories object');
                        }
                    })
                });

                $('#btnUploadObjectTransactions').click(function(){
                    jsonCacher.insertObject({
                        name: 'Transactions',
                        data: transactions,
                        onSuccess: function(){
                            logMessage('Succesfully inserted Transactions object');
                        }
                    })
                });

                //Get Objects
                $('#btnGetObject').click(function(){
                    var objectNameInput = $('#objectNameTextbox').val();
                    jsonCacher.getObject({
                        name: objectNameInput,
                        onSuccess: function(objectName, object){
                            logMessage('Successfully downloaded object ' + objectName + '\n '
                                + JSON.stringify(object));
                        },
                        onFail: function(errorText){
                            logMessage('Failed donloading object ' + objectNameInput + '.\n' + errorText);
                        }
                    });
                });

                //Delete Objects
                $('#btnDeleteObject').click(function(){
                    jsonCacher.deleteObject({
                        name: $('#objectNameTextbox').val(),
                        onSuccess: function(objectName){
                            logMessage('Successfully delete object ' + objectName);
                        }
                    });
                });

                function logMessage(message){
                    $('#logText').val($('#logText').val() + '\n\n' + message);
                    $('#logText').scrollTop($('#logText')[0].scrollHeight);
                }

            });
        </script>
    </head>
    <body>

        <button id="btnListObjects">List Objects</button>
        <br/>
        <button id="btnUploadObjectCategories">Upload Object Categories</button>
        <button id="btnUploadObjectTransactions">Upload Object Transactions</button>
        <br/>
        <button id="btnGetObject">Get Object</button>
        <button id="btnDeleteObject">Delete Object</button>
        <br/>
        <input id="objectNameTextbox" type="text"/>
        <br/>
        <textarea id="logText" style="width: 95%; height: 75%"></textarea>
    </body>
</html>
